# 其他服务接口设计

## 管理端接口

### 基础路径
```
/api/support
```

---

## 1. 其他服务管理接口

### 1.1 其他服务列表
**接口地址**: `GET /api/support/other-services`

**请求参数**:
```json
{
  "page": 1,                  // 页码
  "page_size": 10,            // 每页数量
  "title": "服务",            // 可选，标题模糊查询
  "status": 1                 // 可选，状态筛选：0-禁用 1-启用
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "技术支持服务",
        "content": "<p>我们提供专业的技术支持服务...</p>",
        "status": 1,
        "created_at": "2026-01-01 00:00:00",
        "updated_at": "2026-01-01 00:00:00"
      }
    ],
    "total": 20,
    "page": 1,
    "page_size": 10,
    "total_pages": 2
  }
}
```

**权限要求**: `other_service:list`

---

### 1.2 其他服务详情
**接口地址**: `GET /api/support/other-services/:id`

**响应数据**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "title": "技术支持服务",
    "content": "<p>我们提供专业的技术支持服务，包括但不限于：<br/>1. 实验方案设计<br/>2. 技术咨询<br/>3. 数据分析支持</p>",
    "status": 1,
    "created_at": "2026-01-01 00:00:00",
    "updated_at": "2026-01-01 00:00:00"
  }
}
```

**权限要求**: `other_service:detail`

---

### 1.3 创建其他服务
**接口地址**: `POST /api/support/other-services`

**请求参数**:
```json
{
  "title": "技术支持服务",                                         // 必填，标题
  "content": "<p>我们提供专业的技术支持服务...</p>",             // 必填，内容（富文本）
  "status": 1                                                     // 可选，状态：0-禁用 1-启用，默认1
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 1,
    "title": "技术支持服务",
    "content": "<p>我们提供专业的技术支持服务...</p>",
    "status": 1,
    "created_at": "2026-01-01 00:00:00",
    "updated_at": "2026-01-01 00:00:00"
  }
}
```

**权限要求**: `other_service:create`

---

### 1.4 更新其他服务
**接口地址**: `PUT /api/support/other-services/:id`

**请求参数**:
```json
{
  "title": "技术支持服务（更新）",                               // 可选，标题
  "content": "<p>更新后的内容...</p>",                          // 可选，内容（富文本）
  "status": 0                                                   // 可选，状态：0-禁用 1-启用
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "更新成功",
  "data": null
}
```

**权限要求**: `other_service:update`

---

### 1.5 删除其他服务
**接口地址**: `DELETE /api/support/other-services/:id`

**响应数据**:
```json
{
  "code": 200,
  "message": "删除成功",
  "data": null
}
```

**权限要求**: `other_service:delete`

---

## 用户端（H5）接口

### 基础路径
```
/api/h5
```

---

## 2. 其他服务查询接口

### 2.1 其他服务列表
**接口地址**: `GET /api/h5/other-services`

**说明**: 仅返回已启用（status=1）的其他服务

**请求参数**:
```json
{
  "page": 1,                  // 页码，默认1
  "page_size": 10             // 每页数量，默认10
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "技术支持服务",
        "content": "<p>我们提供专业的技术支持服务...</p>",
        "created_at": "2026-01-01 00:00:00",
        "updated_at": "2026-01-01 00:00:00"
      }
    ],
    "total": 20,
    "page": 1,
    "page_size": 10,
    "total_pages": 2
  }
}
```

**权限要求**: 无需登录

---

### 2.2 其他服务详情
**接口地址**: `GET /api/h5/other-services/:id`

**说明**: 仅返回已启用（status=1）的其他服务详情

**响应数据**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "title": "技术支持服务",
    "content": "<p>我们提供专业的技术支持服务，包括但不限于：<br/>1. 实验方案设计<br/>2. 技术咨询<br/>3. 数据分析支持</p>",
    "created_at": "2026-01-01 00:00:00",
    "updated_at": "2026-01-01 00:00:00"
  }
}
```

**错误响应**（服务不存在或已禁用）:
```json
{
  "code": 400,
  "message": "其他服务不存在或已禁用",
  "data": null
}
```

**权限要求**: 无需登录

---

## 数据库表结构

### other_services (其他服务表)
```sql
CREATE TABLE `other_services` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '其他服务ID',
  `title` VARCHAR(200) NOT NULL COMMENT '标题',
  `content` TEXT NOT NULL COMMENT '内容（富文本）',
  `status` TINYINT DEFAULT 1 COMMENT '状态：0-禁用 1-启用',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  INDEX `idx_title` (`title`),
  INDEX `idx_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='其他服务表';
```

---

## 业务说明

### 状态说明
- **0 - 禁用**: 在H5端不可见，管理端可见但标记为禁用
- **1 - 启用**: 在H5端和管理端均可见

### 内容格式
- `content` 字段支持富文本（HTML格式）
- 可包含文本、图片、链接等多种元素
- 建议使用富文本编辑器（如 TinyMCE、Quill 等）进行编辑

### 权限配置
管理端需要配置以下权限：
- `other_service:list` - 查看其他服务列表
- `other_service:detail` - 查看其他服务详情
- `other_service:create` - 创建其他服务
- `other_service:update` - 更新其他服务
- `other_service:delete` - 删除其他服务

权限配置需要在 `scripts/generate-permissions.js` 中添加。

---

## 前端集成建议

### 管理端
1. 列表页面支持按标题和状态筛选
2. 详情页面展示完整的富文本内容
3. 编辑页面使用富文本编辑器
4. 支持启用/禁用状态切换

### H5端
1. 列表页面展示标题和创建时间
2. 详情页面完整渲染富文本内容
3. 仅展示已启用的服务
4. 无需登录即可访问
